<!-- templates/fragments/memberTable.html -->
<tbody id="member-table-body" th:fragment="member-table-body">
    <tr th:if="${#lists.isEmpty(members)}">
        <td colspan="3">No members found</td>
    </tr>
    <tr th:each="member : ${members}">
        <td th:text="${member.name}" style="font-weight: bold;">Member Name</td>
        <td style="text-align: center;"
            th:text="${member.weekStatus}"
            th:classappend="${#strings.trim(member.weekStatus) == 'VALIDATED' ? 'validated' :
                            (#strings.trim(member.weekStatus) == 'WARNING' ? 'warning' : 'bad')}">
        </td>
        <td>
            <button
                    th:id="'toggle-button-' + ${member.name}"
                    th:attr="hx-get='/historyFront?playerName=' + ${member.name}, hx-target='#history-' + ${member.name}"
                    hx-swap="innerHTML"
                    hx-trigger="click"
                    th:onclick="toggleHistory([[${member.name}]])">History</button>
            <div>
                <button
                        th:attr="hx-post='/synchronizePlayerFront?playerName=' + ${member.name}, hx-target='#history-' + ${member.name}, hx-indicator='#spinner-' + ${member.name}"
                        hx-swap="innerHTML"
                        hx-trigger="click"
                        class="synchronize"
                        >Synchronize
                </button>
                <img th:id="'spinner-' + ${member.name}" class="htmx-indicator" th:src="@{spinner.svg}" alt="Loading...">
            </div>
        </td>
        <td colspan="3" th:id="'history-' + ${member.name}" style="display:none">
        </td>
    </tr>
</tbody>